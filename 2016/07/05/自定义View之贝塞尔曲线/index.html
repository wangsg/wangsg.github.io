<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="xxx"><title>自定义View之贝塞尔曲线 | 彩色心情</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.1.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">自定义View之贝塞尔曲线</h1><a id="logo" href="/.">彩色心情</a><p class="description">学而不思则罔,思而不学则殆</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/history/"><i class="fa fa-history"> 历史</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">自定义View之贝塞尔曲线</h1><div class="post-meta">Jul 5, 2016<span> | </span><span class="category"><a href="/categories/Android-Develop/">Android Develop</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2016/07/05/自定义View之贝塞尔曲线/" href="/2016/07/05/自定义View之贝塞尔曲线/#comments" class="ds-thread-count"></a><div class="post-content"><p>贝塞尔曲线的百度百科：<br><a href="http://baike.baidu.com/link?url=pm6ei09WGXl7OiTMU_gQV3wUVMKPyBpb-aKjyiUUyaj9iG90fHhjblsGAl9cLDngFGjcm9E1NhhhFEn3aoSiq_" target="_blank" rel="external">贝塞尔曲线</a><br>贝塞尔曲线的应用例子：</p>
<blockquote>
<p>   •    QQ小红点拖拽效果<br>    •    一些炫酷的下拉刷新控件<br>    •    阅读软件的翻书效果<br>    •    一些平滑的折线图的制作<br>    •    很多炫酷的动画效果</p>
</blockquote>
<h3 id="u4E00_u9636_u66F2_u7EBF_u539F_u7406_uFF1A"><a href="#u4E00_u9636_u66F2_u7EBF_u539F_u7406_uFF1A" class="headerlink" title="一阶曲线原理："></a>一阶曲线原理：</h3><p>一阶曲线是没有控制点的，仅有两个数据点(A 和 B)，最终效果一个线段。</p>
<h2 id=""><a href="#" class="headerlink" title="<img src=" https:="" camo.githubusercontent.com="" 373298cbd63fcfa611e5d9a7c618c87bebc61d1d="" 687474703a2f2f7777312e73696e61696d672e636e2f6c617267652f30303558746469326a77316633356f6630343577386a3330386330647771327a2e6a7067"="" alt="">"></a><img src="https://camo.githubusercontent.com/373298cbd63fcfa611e5d9a7c618c87bebc61d1d/687474703a2f2f7777312e73696e61696d672e636e2f6c617267652f30303558746469326a77316633356f6630343577386a3330386330647771327a2e6a7067" alt=""></h2><blockquote>
<p>图片来自维基百科<br><img src="https://camo.githubusercontent.com/71496535e042ea905274315ddafda0defd1de8e1/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f302f30302f422543332541397a6965725f315f6269672e676966" alt=""></p>
</blockquote>
<h3 id="u4E8C_u9636_u66F2_u7EBF_u539F_u7406_uFF1A"><a href="#u4E8C_u9636_u66F2_u7EBF_u539F_u7406_uFF1A" class="headerlink" title="二阶曲线原理："></a>二阶曲线原理：</h3><p>二次方贝兹曲线的路径由给定点P0、P1、P2的函数B（t）追踪：<br>B(t) = (1 - t)^2 <em> P0 + 2t </em> (1 - t) <em> P1 + t^2 </em> P2, t ∈ [0,1]<br>二阶曲线由两个数据点(A 和 C)，一个控制点(B)来描述曲线状态，大致如下：<br><img src="https://camo.githubusercontent.com/b43777aabbfe01b567eadc6cc0fc126879da89f0/687474703a2f2f7777322e73696e61696d672e636e2f6c617267652f30303558746469326a7731663336316f6a653668316a333038633064776467302e6a7067" alt=""><br>连接DE，取点F，使得: <img src="https://camo.githubusercontent.com/1f944e9726f64e7c424678f5ee05a404c8bbe7ff/687474703a2f2f63686172742e676f6f676c65617069732e636f6d2f63686172743f6368743d74782663686c3d253543667261632537424144253744253742414225374425323025334425323025354366726163253742424525374425374242432537442532302533442532302535436672616325374244462537442537424445253744" alt=""><br>这样获取到的点F就是贝塞尔曲线上的一个点，动态过程如下：<br><img src="https://camo.githubusercontent.com/e42e6067ba0955631e3207a6fbd4b24f4a26132f/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f332f33642f422543332541397a6965725f325f6269672e676966" alt=""></p>
<h3 id="u4E09_u9636_u66F2_u7EBF_u539F_u7406_uFF1A"><a href="#u4E09_u9636_u66F2_u7EBF_u539F_u7406_uFF1A" class="headerlink" title="三阶曲线原理："></a>三阶曲线原理：</h3><p>B(t) = P0 <em> (1-t)^3 + 3 </em> P1 <em> t </em> (1-t)^2 + 3 <em> P2 </em> t^2 <em> (1-t) + P3 </em> t^3<br>三阶曲线由两个数据点(A 和 D)，两个控制点(B 和 C)来描述曲线状态，如下：<br><img src="https://camo.githubusercontent.com/c71bfd45b2ea826f1b15642870c7c52aef03b097/687474703a2f2f7777322e73696e61696d672e636e2f6c617267652f30303558746469326777316633366d7965716375356a333038633064776467322e6a7067" alt=""><br>动态图：<br><img src="https://camo.githubusercontent.com/e8db61bc38f255f4d1b701126f6920688c8e5de4/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f642f64622f422543332541397a6965725f335f6269672e676966" alt=""></p>
<p>一阶曲线是一条线段，非常简单，不详细讲解了。</p>
<blockquote>
<p>首先，两个数据点是控制贝塞尔曲线开始和结束的位置，比较容易理解，而控制点则是控制贝塞尔的弯曲状态，相对来说比较难以理解，所以本示例重点在于理解贝塞尔曲线弯曲状态与控制点的关系.</p>
</blockquote>
<p><img src="https://camo.githubusercontent.com/8234183ba3ba33f47f83d233fce17d2775c0b98d/687474703a2f2f7777322e73696e61696d672e636e2f6c617267652f30303558746469326777316633397675676a67307667333038633065383430392e676966" alt=""></p>
<blockquote>
<p>为了更加容易看出控制点与曲线弯曲程度的关系，上图中绘制出了辅助点和辅助线，从上面的动态图可以看出，贝塞尔曲线在动态变化过程中有类似于橡皮筋一样的弹性效果，因此在制作一些弹性效果的时候很常用。</p>
</blockquote>
<figure class="highlight"><figcaption><span>class Bezier extends View &#123;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;    private Paint mPaint;&#10;    private int centerX, centerY;&#10;&#10;    private PointF start, end, control;&#10;&#10;    public Bessel1(Context context) &#123;&#10;        super(context);&#10;        mPaint = new Paint();&#10;        mPaint.setColor(Color.BLACK);&#10;        mPaint.setStrokeWidth(8);&#10;        mPaint.setStyle(Paint.Style.STROKE);&#10;        mPaint.setTextSize(60);&#10;&#10;        start = new PointF(0,0);&#10;        end = new PointF(0,0);&#10;        control = new PointF(0,0);&#10;    &#125;&#10;&#10;    @Override&#10;    protected void onSizeChanged(int w, int h, int oldw, int oldh) &#123;&#10;        super.onSizeChanged(w, h, oldw, oldh);&#10;        centerX = w/2;&#10;        centerY = h/2;&#10;&#10;        // &#21021;&#22987;&#21270;&#25968;&#25454;&#28857;&#21644;&#25511;&#21046;&#28857;&#30340;&#20301;&#32622;&#10;        start.x = centerX-200;&#10;        start.y = centerY;&#10;        end.x = centerX+200;&#10;        end.y = centerY;&#10;        control.x = centerX;&#10;        control.y = centerY-100;&#10;    &#125;&#10;&#10;    @Override&#10;    public boolean onTouchEvent(MotionEvent event) &#123;&#10;        // &#26681;&#25454;&#35302;&#25720;&#20301;&#32622;&#26356;&#26032;&#25511;&#21046;&#28857;&#65292;&#24182;&#25552;&#31034;&#37325;&#32472;&#10;        control.x = event.getX();&#10;        control.y = event.getY();&#10;        invalidate();&#10;        return true;&#10;    &#125;&#10;&#10;    @Override&#10;    protected void onDraw(Canvas canvas) &#123;&#10;        super.onDraw(canvas);&#10;&#10;        // &#32472;&#21046;&#25968;&#25454;&#28857;&#21644;&#25511;&#21046;&#28857;&#10;        mPaint.setColor(Color.GRAY);&#10;        mPaint.setStrokeWidth(20);&#10;        canvas.drawPoint(start.x,start.y,mPaint);&#10;        canvas.drawPoint(end.x,end.y,mPaint);&#10;        canvas.drawPoint(control.x,control.y,mPaint);&#10;&#10;        // &#32472;&#21046;&#36741;&#21161;&#32447;&#10;        mPaint.setStrokeWidth(4);&#10;        canvas.drawLine(start.x,start.y,control.x,control.y,mPaint);&#10;        canvas.drawLine(end.x,end.y,control.x,control.y,mPaint);&#10;&#10;        // &#32472;&#21046;&#36125;&#22622;&#23572;&#26354;&#32447;&#10;        mPaint.setColor(Color.RED);&#10;        mPaint.setStrokeWidth(8);&#10;&#10;        Path path = new Path();&#10;&#10;        path.moveTo(start.x,start.y);&#10;        path.quadTo(control.x,control.y,end.x,end.y);&#10;&#10;        canvas.drawPath(path, mPaint);&#10;    &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>三阶贝塞尔:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.cubicTo(control1.x, control1.y, control2.x,control2.y, end.x, end.y);</span><br></pre></td></tr></table></figure></p>
<h3 id="u5982_u4F55_u7528_u8D1D_u585E_u5C14_u66F2_u7EBF_u753B_u4E00_u4E2A_u5706"><a href="#u5982_u4F55_u7528_u8D1D_u585E_u5C14_u66F2_u7EBF_u753B_u4E00_u4E2A_u5706" class="headerlink" title="如何用贝塞尔曲线画一个圆"></a>如何用贝塞尔曲线画一个圆</h3><p>stackoverflow上边有个方案<a href="http://stackoverflow.com/questions/1734745/how-to-create-circle-with-b%C3%A9zier-curves" target="_blank" rel="external">How to create circle with Bézier curves?</a><br>看下图：<br><img src="http://i.stack.imgur.com/aEsuA.png" alt=""><br>数值c约等于0.551915024494f<br><img src="http://static.zybuluo.com/devinshine/rq9l1712aeyo62l0wsyetj32/jiangjietu.png" alt=""><br>如果我们打算用贝塞尔曲线来画这么一个圆的话，我们需要知道这个圆的半径，以及图中的M的值，知道这两个值的话就能够知道图中12个点的坐标，知道坐标就能够用Path的cubicTo方法来使用贝塞尔曲线画出圆了。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">mPath</span><span class="class">.moveTo</span>(<span class="tag">p0</span><span class="class">.x</span>,<span class="tag">p0</span><span class="class">.y</span>);</span><br><span class="line"><span class="tag">mPath</span><span class="class">.cubicTo</span>(<span class="tag">p1</span><span class="class">.x</span>, <span class="tag">p1</span><span class="class">.y</span>, <span class="tag">p2</span><span class="class">.x</span>, <span class="tag">p2</span><span class="class">.y</span>, <span class="tag">p3</span><span class="class">.x</span>,<span class="tag">p3</span><span class="class">.y</span>);</span><br></pre></td></tr></table></figure></p>
<h4 id="u5982_u4F55_u7528_u8D1D_u585E_u5C14_u5B9E_u73B0_u9ECF_u6027_u56ED"><a href="#u5982_u4F55_u7528_u8D1D_u585E_u5C14_u5B9E_u73B0_u9ECF_u6027_u56ED" class="headerlink" title="如何用贝塞尔实现黏性园"></a>如何用贝塞尔实现黏性园</h4><p><img src="http://static.zybuluo.com/devinshine/2sp9u008ws19xd1vdfx7k43m/diorKTU84Papple09152015022708.gif" alt=""><br>相信看到下图都该明白如何做到上图动画如何实现的了<br><img src="http://static.zybuluo.com/devinshine/xdhdxhv3ly34nh479tim26dn/jiangjietu2.png" alt=""></p>
<p>参考：<br><a href="http://gavinliu.cn/2015/03/30/Android-Animation-%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF%E4%B9%8B%E7%BE%8E/" target="_blank" rel="external">Android - Animation 贝塞尔曲线之美</a><br><a href="https://github.com/GcsSloop/AndroidNote/blob/master/CustomView/Advance/%5B6%5DPath_Bezier.md" target="_blank" rel="external">Path之贝塞尔曲线</a><br><a href="http://www.jianshu.com/p/791d3a791ec2" target="_blank" rel="external">三次贝塞尔曲线练习之弹性的圆</a></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2016/07/05/自定义View之贝塞尔曲线/" data-id="ciqc3uvzv000871fymxed0vnq" class="article-share-link">分享到</a><div class="tags"><a href="/tags/贝塞尔曲线/">贝塞尔曲线</a></div><div class="post-nav"><a href="/2016/07/06/Activity启动过程/" class="pre">Activity启动过程</a><a href="/2016/07/01/自定义View之Path基础/" class="next">自定义View之Path基础</a></div><div data-thread-key="2016/07/05/自定义View之贝塞尔曲线/" data-title="自定义View之贝塞尔曲线" data-url="http://yoursite.com/2016/07/05/自定义View之贝塞尔曲线/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2016/07/05/自定义View之贝塞尔曲线/" data-title="自定义View之贝塞尔曲线" data-url="http://yoursite.com/2016/07/05/自定义View之贝塞尔曲线/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android-Develop/">Android Develop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/life/">life</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Android-琐碎/" style="font-size: 15px;">Android 琐碎</a> <a href="/tags/随笔/" style="font-size: 15px;">随笔</a> <a href="/tags/自定义View/" style="font-size: 15px;">自定义View</a> <a href="/tags/path/" style="font-size: 15px;">path</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/技术杂谈/" style="font-size: 15px;">技术杂谈</a> <a href="/tags/贝塞尔曲线/" style="font-size: 15px;">贝塞尔曲线</a> <a href="/tags/WebView/" style="font-size: 15px;">WebView</a> <a href="/tags/android-studio/" style="font-size: 15px;">android studio</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/性能优化/" style="font-size: 15px;">性能优化</a> <a href="/tags/动画/" style="font-size: 15px;">动画</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/07/07/WebView的那些坑/">WebView的那些坑</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/06/Android性能优化之布局优化/">Android性能优化之布局优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/06/Activity启动过程/">Activity启动过程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/05/自定义View之贝塞尔曲线/">自定义View之贝塞尔曲线</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/01/自定义View之Path基础/">自定义View之Path基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/01/自定义View之基础/">自定义View之基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/29/Android动画系列（三）/">Android动画系列（三）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/29/Android动画系列（二）/">Android动画系列（二）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/29/Android动画系列（一）/">Android动画系列（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/29/<转>程序员，你迷茫么？你忧伤么？/"><转>程序员，你迷茫么？你忧伤么？</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://blog.csdn.net/sinyu890807/article/list/5" title="郭霖大婶" target="_blank">郭霖大婶</a><ul></ul><a href="http://blog.csdn.net/singwhatiwanna" title="任大侠" target="_blank">任大侠</a><ul></ul><a href="http://gank.io/" title="干货集中营" target="_blank">干货集中营</a><ul></ul><a href="http://p.codekk.com/" title="codeKK" target="_blank">codeKK</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">彩色心情.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'wangsg'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?5b8c220205c8c6f8ff1c458c7b53c17b";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>